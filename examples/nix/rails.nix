# rails â€” generated by onix. Do not edit.
{ pkgs ? import <nixpkgs> {}, ruby ? pkgs.ruby_3_4 }:
let
  buildGem = import ./build-gem.nix { inherit pkgs ruby; };
  buildGemByName = name:
    let
      versions = import (./ruby + "/${name}.nix");
      version = builtins.head (builtins.attrNames versions);
      spec = versions.${version};
    in buildGem (spec // { gemName = name; });
  gemConfig = import ./gem-config.nix {
    inherit pkgs ruby;
    overlayDir = ../overlays/ruby;
    rubyDir = ./ruby;
    buildGemFn = buildGemByName;
  };

  build = name: version:
    let
      versions = import (./ruby + "/${name}.nix");
      spec = versions.${version};
      config = gemConfig.${name} or {};
    in buildGem (spec // {
      gemName = name;
      nativeBuildInputs = config.deps or [];
      extconfFlags = config.extconfFlags or "";
      preBuild = config.preBuild or "";
      postBuild = config.postBuild or "";
    } // (if config ? buildPhase then { inherit (config) buildPhase; } else {})
      // (if config ? postInstall then { inherit (config) postInstall; } else {})
      // (if config ? skip then { inherit (config) skip; } else {})
      // (if config ? buildGems then { inherit (config) buildGems; } else {}));

  gems = {
    "action_text-trix" = build "action_text-trix" "2.1.16";
    addressable = build "addressable" "2.8.7";
    "amq-protocol" = build "amq-protocol" "2.3.2";
    argon2 = build "argon2" "2.3.2";
    ast = build "ast" "2.4.2";
    "aws-eventstream" = build "aws-eventstream" "1.4.0";
    "aws-partitions" = build "aws-partitions" "1.1150.0";
    "aws-sdk-core" = build "aws-sdk-core" "3.230.0";
    "aws-sdk-kms" = build "aws-sdk-kms" "1.110.0";
    "aws-sdk-s3" = build "aws-sdk-s3" "1.197.0";
    "aws-sdk-sns" = build "aws-sdk-sns" "1.92.0";
    "aws-sigv4" = build "aws-sigv4" "1.12.1";
    backburner = build "backburner" "1.7.0";
    base64 = build "base64" "0.3.0";
    bcrypt = build "bcrypt" "3.1.20";
    bcrypt_pbkdf = build "bcrypt_pbkdf" "1.1.1";
    beaneater = build "beaneater" "1.1.3";
    bigdecimal = build "bigdecimal" "3.2.3";
    bindex = build "bindex" "0.8.1";
    bootsnap = build "bootsnap" "1.18.4";
    brakeman = build "brakeman" "7.0.0";
    builder = build "builder" "3.3.0";
    "bundler-audit" = build "bundler-audit" "0.9.3";
    bunny = build "bunny" "2.23.0";
    capybara = build "capybara" "3.40.0";
    "chef-utils" = build "chef-utils" "18.6.2";
    childprocess = build "childprocess" "5.1.0";
    "concurrent-ruby" = build "concurrent-ruby" "1.3.6";
    connection_pool = build "connection_pool" "2.5.4";
    crack = build "crack" "1.0.0";
    crass = build "crass" "1.0.6";
    "cssbundling-rails" = build "cssbundling-rails" "1.4.1";
    dalli = build "dalli" "5.0.0";
    dante = build "dante" "0.2.0";
    "dartsass-rails" = build "dartsass-rails" "0.5.1";
    debug = build "debug" "1.10.0";
    declarative = build "declarative" "0.0.20";
    "digest-crc" = build "digest-crc" "0.6.5";
    dotenv = build "dotenv" "3.1.7";
    drb = build "drb" "2.2.3";
    ed25519 = build "ed25519" "1.3.0";
    erubi = build "erubi" "1.13.1";
    "et-orbi" = build "et-orbi" "1.2.11";
    event_emitter = build "event_emitter" "0.2.6";
    execjs = build "execjs" "2.10.0";
    faraday = build "faraday" "2.14.0";
    "faraday-net_http" = build "faraday-net_http" "3.4.2";
    ffi = build "ffi" "1.17.1";
    "ffi-compiler" = build "ffi-compiler" "1.3.2";
    fugit = build "fugit" "1.11.1";
    globalid = build "globalid" "1.2.1";
    "google-apis-core" = build "google-apis-core" "0.15.1";
    "google-apis-iamcredentials_v1" = build "google-apis-iamcredentials_v1" "0.22.0";
    "google-apis-storage_v1" = build "google-apis-storage_v1" "0.49.0";
    "google-cloud-core" = build "google-cloud-core" "1.7.1";
    "google-cloud-env" = build "google-cloud-env" "2.2.1";
    "google-cloud-errors" = build "google-cloud-errors" "1.4.0";
    "google-cloud-storage" = build "google-cloud-storage" "1.54.0";
    "google-logging-utils" = build "google-logging-utils" "0.1.0";
    "google-protobuf" = build "google-protobuf" "4.29.3";
    googleauth = build "googleauth" "1.12.2";
    hashdiff = build "hashdiff" "1.1.2";
    httpclient = build "httpclient" "2.9.0";
    i18n = build "i18n" "1.14.7";
    image_processing = build "image_processing" "1.14.0";
    "importmap-rails" = build "importmap-rails" "2.1.0";
    jbuilder = build "jbuilder" "2.13.0";
    jmespath = build "jmespath" "1.6.2";
    "jsbundling-rails" = build "jsbundling-rails" "1.3.1";
    jwt = build "jwt" "2.10.1";
    kamal = build "kamal" "2.4.0";
    kramdown = build "kramdown" "2.5.1";
    "kramdown-parser-gfm" = build "kramdown-parser-gfm" "1.1.0";
    "language_server-protocol" = build "language_server-protocol" "3.17.0.3";
    launchy = build "launchy" "3.0.1";
    "libxml-ruby" = build "libxml-ruby" "5.0.4";
    lint_roller = build "lint_roller" "1.1.0";
    listen = build "listen" "3.9.0";
    loofah = build "loofah" "2.24.1";
    mail = build "mail" "2.8.1";
    marcel = build "marcel" "1.0.4";
    matrix = build "matrix" "0.4.2";
    mdl = build "mdl" "0.12.0";
    mini_magick = build "mini_magick" "5.3.1";
    mini_mime = build "mini_mime" "1.1.5";
    mini_portile2 = build "mini_portile2" "2.8.9";
    minitest = build "minitest" "6.0.0";
    "minitest-mock" = build "minitest-mock" "5.27.0";
    "minitest-retry" = build "minitest-retry" "0.2.3";
    "mixlib-cli" = build "mixlib-cli" "2.1.8";
    "mixlib-config" = build "mixlib-config" "3.0.27";
    "mixlib-shellout" = build "mixlib-shellout" "3.3.4";
    mono_logger = build "mono_logger" "1.1.2";
    msgpack = build "msgpack" "1.7.5";
    multi_json = build "multi_json" "1.15.0";
    mustermann = build "mustermann" "3.0.4";
    mutex_m = build "mutex_m" "0.3.0";
    mysql2 = build "mysql2" "0.5.6";
    "net-imap" = build "net-imap" "0.5.5";
    "net-pop" = build "net-pop" "0.1.2";
    "net-scp" = build "net-scp" "4.0.0";
    "net-sftp" = build "net-sftp" "4.0.0";
    "net-smtp" = build "net-smtp" "0.5.1";
    "net-ssh" = build "net-ssh" "7.3.0";
    nio4r = build "nio4r" "2.7.4";
    nokogiri = build "nokogiri" "1.18.10";
    os = build "os" "1.1.4";
    parallel = build "parallel" "1.26.3";
    parser = build "parser" "3.3.9.0";
    pg = build "pg" "1.6.3";
    propshaft = build "propshaft" "1.3.1";
    public_suffix = build "public_suffix" "6.0.1";
    puma = build "puma" "6.5.0";
    queue_classic = build "queue_classic" "4.0.0";
    raabro = build "raabro" "1.4.0";
    racc = build "racc" "1.8.1";
    rack = build "rack" "3.2.1";
    "rack-cache" = build "rack-cache" "1.17.0";
    "rack-protection" = build "rack-protection" "4.1.1";
    "rack-session" = build "rack-session" "2.1.1";
    "rack-test" = build "rack-test" "2.2.0";
    rackup = build "rackup" "2.2.1";
    "rails-dom-testing" = build "rails-dom-testing" "2.3.0";
    "rails-html-sanitizer" = build "rails-html-sanitizer" "1.6.2";
    rainbow = build "rainbow" "3.1.1";
    rake = build "rake" "13.3.0";
    "rb-fsevent" = build "rb-fsevent" "0.11.2";
    "rb-inotify" = build "rb-inotify" "0.11.1";
    rbtree = build "rbtree" "0.4.6";
    redcarpet = build "redcarpet" "3.6.1";
    redis = build "redis" "5.4.1";
    "redis-client" = build "redis-client" "0.25.2";
    "redis-namespace" = build "redis-namespace" "1.11.0";
    regexp_parser = build "regexp_parser" "2.10.0";
    representable = build "representable" "3.2.0";
    resque = build "resque" "2.7.0";
    "resque-scheduler" = build "resque-scheduler" "4.11.0";
    retriable = build "retriable" "3.1.2";
    rexml = build "rexml" "3.4.0";
    rouge = build "rouge" "4.6.1";
    rubocop = build "rubocop" "1.79.2";
    "rubocop-ast" = build "rubocop-ast" "1.46.0";
    "rubocop-md" = build "rubocop-md" "2.0.1";
    "rubocop-minitest" = build "rubocop-minitest" "0.37.1";
    "rubocop-packaging" = build "rubocop-packaging" "0.6.0";
    "rubocop-performance" = build "rubocop-performance" "1.24.0";
    "rubocop-rails" = build "rubocop-rails" "2.30.3";
    "rubocop-rails-omakase" = build "rubocop-rails-omakase" "1.0.0";
    "ruby-progressbar" = build "ruby-progressbar" "1.13.0";
    "ruby-vips" = build "ruby-vips" "2.2.2";
    rubyzip = build "rubyzip" "2.4.1";
    "rufus-scheduler" = build "rufus-scheduler" "3.9.2";
    "sass-embedded" = build "sass-embedded" "1.83.4";
    sdoc = build "sdoc" "2.6.5";
    "selenium-webdriver" = build "selenium-webdriver" "4.32.0";
    serverengine = build "serverengine" "2.0.7";
    sigdump = build "sigdump" "0.2.5";
    signet = build "signet" "0.19.0";
    sinatra = build "sinatra" "4.1.1";
    sneakers = build "sneakers" "2.11.0";
    solid_cable = build "solid_cable" "3.0.5";
    solid_cache = build "solid_cache" "1.0.6";
    solid_queue = build "solid_queue" "1.1.2";
    sorted_set = build "sorted_set" "1.0.3";
    sprockets = build "sprockets" "4.2.1";
    "sprockets-rails" = build "sprockets-rails" "3.5.2";
    sqlite3 = build "sqlite3" "2.5.0";
    sshkit = build "sshkit" "1.23.2";
    stackprof = build "stackprof" "0.2.27";
    "stimulus-rails" = build "stimulus-rails" "1.3.4";
    "tailwindcss-rails" = build "tailwindcss-rails" "3.2.0";
    "tailwindcss-ruby" = build "tailwindcss-ruby" "3.4.17";
    terser = build "terser" "1.2.4";
    thor = build "thor" "1.3.2";
    thruster = build "thruster" "0.1.16";
    tilt = build "tilt" "2.6.1";
    tomlrb = build "tomlrb" "2.0.3";
    "trailblazer-option" = build "trailblazer-option" "0.1.2";
    trilogy = build "trilogy" "2.9.0";
    "turbo-rails" = build "turbo-rails" "2.0.11";
    tzinfo = build "tzinfo" "2.0.6";
    uber = build "uber" "0.1.0";
    "unicode-display_width" = build "unicode-display_width" "3.1.4";
    "unicode-emoji" = build "unicode-emoji" "4.2.0";
    useragent = build "useragent" "0.16.11";
    w3c_validators = build "w3c_validators" "1.3.7";
    "web-console" = build "web-console" "4.2.1";
    webmock = build "webmock" "3.25.0";
    webrick = build "webrick" "1.9.1";
    websocket = build "websocket" "1.2.11";
    "websocket-client-simple" = build "websocket-client-simple" "0.9.0";
    "websocket-driver" = build "websocket-driver" "0.7.7";
    "websocket-extensions" = build "websocket-extensions" "0.1.5";
    xpath = build "xpath" "3.2.0";
    zeitwerk = build "zeitwerk" "2.7.3";
  };

  bundlePath = pkgs.buildEnv {
    name = "rails-bundle";
    paths = builtins.attrValues gems;
  };
in gems // {
  inherit bundlePath;
  devShell = { buildInputs ? [], shellHook ? "", ... }@args:
    pkgs.mkShell (builtins.removeAttrs args ["buildInputs" "shellHook"] // {
      name = "rails-devshell";
      buildInputs = [ ruby ] ++ buildInputs;
      shellHook = ''
        export BUNDLE_PATH="${bundlePath}"
        export BUNDLE_GEMFILE="''${BUNDLE_GEMFILE:-$PWD/Gemfile}"
        export GEM_PATH="${bundlePath}/${ruby.gemPath}''${GEM_PATH:+:$GEM_PATH}"
      '' + shellHook;
    });
}
