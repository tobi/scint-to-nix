# synthetic â€” generated by onix. Do not edit.
{ pkgs ? import <nixpkgs> {}, ruby ? pkgs.ruby_3_4 }:
let
  buildGem = import ./build-gem.nix { inherit pkgs ruby; };
  buildGemByName = name:
    let
      versions = import (./ruby + "/${name}.nix");
      version = builtins.head (builtins.attrNames versions);
      spec = versions.${version};
    in buildGem (spec // { gemName = name; });
  gemConfig = import ./gem-config.nix {
    inherit pkgs ruby;
    overlayDir = ../overlays;
    rubyDir = ./ruby;
    buildGemFn = buildGemByName;
  };

  build = name: version:
    let
      versions = import (./ruby + "/${name}.nix");
      spec = versions.${version};
      config = gemConfig.${name} or {};
    in buildGem (spec // {
      gemName = name;
      nativeBuildInputs = config.deps or [];
      extconfFlags = config.extconfFlags or "";
      beforeBuild = config.beforeBuild or "";
      afterBuild = config.afterBuild or "";
    } // (if config ? buildPhase then { inherit (config) buildPhase; } else {})
      // (if config ? postInstall then { inherit (config) postInstall; } else {})
      // (if config ? skip then { inherit (config) skip; } else {})
      // (if config ? buildGems then { inherit (config) buildGems; } else {}));

  gems = {
    "action_text-trix" = build "action_text-trix" "2.1.16";
    actioncable = build "actioncable" "8.2.0.alpha";
    actionmailbox = build "actionmailbox" "8.2.0.alpha";
    actionmailer = build "actionmailer" "8.2.0.alpha";
    actionpack = build "actionpack" "8.2.0.alpha";
    actiontext = build "actiontext" "8.2.0.alpha";
    actionview = build "actionview" "8.2.0.alpha";
    activejob = build "activejob" "8.2.0.alpha";
    activemodel = build "activemodel" "8.2.0.alpha";
    activerecord = build "activerecord" "8.2.0.alpha";
    activestorage = build "activestorage" "8.2.0.alpha";
    activesupport = build "activesupport" "8.2.0.alpha";
    base64 = build "base64" "0.3.0";
    bigdecimal = build "bigdecimal" "4.0.1";
    bootsnap = build "bootsnap" "1.21.1";
    builder = build "builder" "3.3.0";
    commonmarker = build "commonmarker" "2.6.3";
    "concurrent-ruby" = build "concurrent-ruby" "1.3.6";
    connection_pool = build "connection_pool" "3.0.2";
    crass = build "crass" "1.0.6";
    drb = build "drb" "2.2.3";
    erubi = build "erubi" "1.13.1";
    "et-orbi" = build "et-orbi" "1.4.0";
    fugit = build "fugit" "1.12.1";
    globalid = build "globalid" "1.3.0";
    i18n = build "i18n" "1.14.8";
    jbuilder = build "jbuilder" "2.14.1";
    liquid = build "liquid" "5.10.0";
    loofah = build "loofah" "2.25.0";
    mail = build "mail" "2.9.0";
    marcel = build "marcel" "1.1.0";
    mini_mime = build "mini_mime" "1.1.5";
    mini_portile2 = build "mini_portile2" "2.8.9";
    minitest = build "minitest" "6.0.1";
    msgpack = build "msgpack" "1.8.0";
    "net-imap" = build "net-imap" "0.6.2";
    "net-pop" = build "net-pop" "0.1.2";
    "net-smtp" = build "net-smtp" "0.5.1";
    nio4r = build "nio4r" "2.7.5";
    nokogiri = build "nokogiri" "1.19.0";
    propshaft = build "propshaft" "1.3.1";
    puma = build "puma" "7.1.0";
    raabro = build "raabro" "1.4.0";
    racc = build "racc" "1.8.1";
    rack = build "rack" "3.2.4";
    "rack-session" = build "rack-session" "2.1.1";
    "rack-test" = build "rack-test" "2.2.0";
    rackup = build "rackup" "2.3.1";
    rails = build "rails" "8.2.0.alpha";
    "rails-dom-testing" = build "rails-dom-testing" "2.3.0";
    "rails-html-sanitizer" = build "rails-html-sanitizer" "1.6.2";
    railties = build "railties" "8.2.0.alpha";
    rake = build "rake" "13.3.1";
    rb_sys = build "rb_sys" "0.9.124";
    solid_cable = build "solid_cable" "3.0.12";
    solid_cache = build "solid_cache" "1.0.10";
    solid_queue = build "solid_queue" "1.2.4";
    sqlite3 = build "sqlite3" "2.8.0";
    "stimulus-rails" = build "stimulus-rails" "1.3.4";
    thor = build "thor" "1.5.0";
    "turbo-rails" = build "turbo-rails" "2.0.21";
    tzinfo = build "tzinfo" "2.0.6";
    useragent = build "useragent" "0.16.11";
    "websocket-driver" = build "websocket-driver" "0.8.0";
    "websocket-extensions" = build "websocket-extensions" "0.1.5";
    zeitwerk = build "zeitwerk" "2.7.4";
  };

  bundlePath = pkgs.buildEnv {
    name = "synthetic-bundle";
    paths = builtins.attrValues gems;
  };
in gems // {
  inherit bundlePath;
  devShell = { buildInputs ? [], shellHook ? "", ... }@args:
    pkgs.mkShell (builtins.removeAttrs args ["buildInputs" "shellHook"] // {
      name = "synthetic-devshell";
      buildInputs = [ ruby ] ++ buildInputs;
      shellHook = ''
        export BUNDLE_PATH="${bundlePath}"
        export BUNDLE_GEMFILE="''${BUNDLE_GEMFILE:-$PWD/Gemfile}"
        export GEM_PATH="${bundlePath}/ruby/${ruby.version.majMinTiny}''${GEM_PATH:+:$GEM_PATH}"
      '' + shellHook;
    });
}
